const zamConversionsSnapchatApp={getMetadata(e){return{eventId:e?.["event-id"],clickId:e?.click_id,scc1:this._getCookie("_scid")||void 0,url:e?.url,customer:this.getCustomer(e?.customer)}},getCustomer(e){if(e){if((!e?.firstname||"Guest"===e.firstname)&&e.name){const t=e.name?.split?.(" ");e.firstname=t?.shift?.(),e.lastname=t?.pop?.()}return{firstname:e?.firstname,lastname:e?.lastname,email:e?.email,mobile:e?.mobile}}},viewPage(e){this._sendEventRequest("view-page",{...this.getMetadata(e)}),this._sendPixelEvent("PAGE_VIEW",{client_dedup_id:e?.["event-id"],click_id:window.ScCid})},viewProduct(e){this._sendEventRequest("view-product",{...this.getMetadata(e),product:{id:e?.product?.id,currency:e?.product?.currency,salePrice:e?.product?.sale_price,price:e?.product?.price,categories:e?.product?.categories}}),this._sendPixelEvent("VIEW_CONTENT",{client_dedup_id:e?.["event-id"],item_ids:[this._formatUUID(e?.product?.parent_id?e?.product?.parent_id:e?.product?.id)],name:e?.product?.name,description:e?.product?.name,item_category:e?.product?.categories?.[0]?.name,price:e?.product?.sale_price||e?.product?.price,currency:e?.product?.currency,click_id:window.ScCid})},addToCart(e){this._sendEventRequest("add-to-cart",{...this.getMetadata(e),product:{id:e?.product?.id,currency:e?.product?.currency,salePrice:e?.product?.sale_price,price:e?.product?.price,categories:e?.product?.categories}}),this._sendPixelEvent("ADD_CART",{client_dedup_id:e?.["event-id"],item_ids:[this._formatUUID(e?.product?.parent_id?e?.product?.parent_id:e?.product?.id)],name:e?.product?.name,description:e?.product?.name,item_category:e?.product?.categories?.[0]?.name,price:e?.product?.sale_price||e?.product?.price,currency:e?.product?.currency,click_id:window.ScCid})},purchase(e){this._sendEventRequest("purchase",{...this.getMetadata(e),customer:this.getCustomer({...e?.customer,...e?.order?.customer}),order:{id:e?.order?.id,products:e?.order?.products?.map((e=>({id:e?.id,quantity:e?.quantity,categories:e?.categories}))),currency:e?.currency||e?.order?.currency_code,total:e?.order?.order_total}}),this._sendPixelEvent("PURCHASE",{client_dedup_id:""+e?.order?.id,transaction_id:e?.order?.id,item_ids:e?.order?.products?.map((e=>this._formatUUID(e?.id))),number_items:e?.order?.products?.map((e=>e?.quantity)),item_category:e?.order?.products?.map((e=>e?.categories?.[0]?.name)),price:e?.order?.order_total,currency:e?.currency||e?.order?.currency_code,click_id:window.ScCid})},addPaymentInfo(e){this._sendEventRequest("checkout-billing",{...this.getMetadata(e),cart:{id:e?.cart?.id,total:e?.cart?.total_value,currency:e?.cart?.currency,products:e?.cart?.products?.map((e=>({id:e?.id,quantity:e?.quantity,categories:e?.categories})))}}),this._sendPixelEvent("ADD_BILLING",{client_dedup_id:e?.["event-id"],item_ids:e?.cart?.products?.map((e=>this._formatUUID(e?.id))),number_items:e?.cart?.products?.map((e=>e?.quantity)),item_category:e?.order?.products?.map((e=>e?.categories?.[0]?.name)),price:e?.cart?.total_value,currency:e?.cart?.currency,click_id:window.ScCid})},initiateCheckout(e){this._sendEventRequest("checkout-start",{...this.getMetadata(e),cart:{id:e?.cart?.id,total:e?.cart?.total_value,currency:e?.cart?.currency,products:e?.cart?.products?.map((e=>({id:e?.id,quantity:e?.quantity,categories:e?.categories})))}}),this._sendPixelEvent("START_CHECKOUT",{client_dedup_id:e?.["event-id"],item_ids:e?.cart?.products?.map((e=>this._formatUUID(e?.id))),number_items:e?.cart?.products?.map((e=>e?.quantity)),item_category:e?.order?.products?.map((e=>e?.categories?.[0]?.name)),price:e?.cart?.total_value,currency:e?.cart?.currency,click_id:window.ScCid})},event(e,t){"function"!=typeof this?.[e]?console.warn("zamConversionsSnapchat, unknown event",e):this?.[e](t)},_sendEventRequest(e,t){if(window?.zamConversionsSnapchatInit)return fetch("https://zam-conversions-snapchat.zid.sa/store-events/110009/"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})},_sendPixelEvent(e,t){if(window?.zamConversionsSnapchatInit&&window.zamSNAPTR&&"function"==typeof window.snaptr)return window.snaptr("track",e,t)},_formatUUID(e){try{if(32!==e?.length)return e;const t=e.match(/^(.{8})(.{4})(.{4})(.{4})(.{12})/);return t?.length?`${t[1]}-${t[2]}-${t[3]}-${t[4]}-${t[5]}`:e}catch(t){return e}},_getCookie(e){const t=document.cookie?document.cookie.split("; "):[];for(let r=0;r<t.length;r++){const i=t[r].split("=");if(decodeURIComponent(i[0])===e)return decodeURIComponent(i.slice(1).join("="))}return""}};window.zamConversionsSnapchat=zamConversionsSnapchatApp,setTimeout((()=>{window.zamConversionsSnapchat=zamConversionsSnapchatApp,window?.zamConversionsSnapchatQueue?.length&&window?.zamConversionsSnapchatQueue?.map((e=>{window.zamConversionsSnapchat.event(e.eventName,e?.data)}))}),200);